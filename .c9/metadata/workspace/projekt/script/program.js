{"changed":true,"filter":false,"title":"program.js","tooltip":"/projekt/script/program.js","value":"\"use strict\"; //objekt.metod/egenskap(argument)\n\nvar Program = {\n\n    init: function() {\n        \n        \n    }\n        \n\n};\n//När sidan har laddads in så anropas init.\nwindow.onload = Quiz.init;\n\n\n\n\n\n\n","undoManager":{"mark":10,"position":33,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":106,"column":0},"action":"insert","lines":["\"use strict\"; //objekt.metod/egenskap(argument)","","var Quiz = {","    nrOfTriesArray: [],","    quizObj: undefined,","    xhr: new XMLHttpRequest(), // skapar requestObjekt","    countTries: undefined,","    counter: 0, // antal klick","    init: function(e) { ","        ","        Quiz.question('http://vhost3.lnu.se:20080/question/1');\t","        \t","        \t\tif(!e){ e = window.event; }","","\t\t\tif(e.keyCode == 13 && !e.shiftKey){","\t\t\t\te.preventDefault();","\t\t\t\tQuiz.messageText();\t\t\t","\t\t}","    },","        ","        ","        question: function(url) { ","            var pTag = document.getElementById(\"question\");","               Quiz.countTries = document.getElementById(\"countTries\");","            // Koppla en händelsehanterare på vad som ska hända när vi får ett svar","            // onreadeystaychange = en händelsehanterare. Vi kopplar den till en funktion. Det som står i det blocket är det som","            // ska köras när vi får ett svar.","            Quiz.xhr.onreadystatechange = function(){","                if(Quiz.xhr.readyState === 4 && Quiz.xhr.status === 200){","                   Quiz.quizObj = JSON.parse(Quiz.xhr.responseText);","                    console.log(Quiz.quizObj.question);","                    pTag.innerHTML = Quiz.quizObj.question; // skriver ut frågan","               ","                    Quiz.click();","                }","            };","            // nästa gång den körs vill jag att den ska köra url","            Quiz.xhr.open('GET', url, true); // måste köra en open för att konfiguera. Alltså Open(\"GET\", \"vad vill vi anropa?\")","            Quiz.xhr.send(null);","        },","        ","        ","        answer: function(url){","                console.log(url);","              var messageText = document.getElementById(\"messageText\");","              var response = document.getElementById(\"response\");","             ","              var quizanswer = {","                  \"id\": 1,","                  \"answer\": messageText.value,","              };","                messageText.value = \"\";","              Quiz.xhr = new XMLHttpRequest();","              Quiz.xhr.onreadystatechange = function(){","                  ","                  // rätt","                    if(Quiz.xhr.readyState === 4 && Quiz.xhr.status === 200){","                        Quiz.quizObj = JSON.parse(Quiz.xhr.responseText);","                        Quiz.question(Quiz.quizObj.nextURL); ","                        Quiz.nrOfTriesArray.push(Quiz.counter);","                        Quiz.counter = 0;","                        response.innerHTML = \"RÄTT! \"","                        ","                    // slut på frågor","                    if (Quiz.quizObj.nextURL === undefined)","                    {  ","                        Quiz.output();","                    }","                    }","                    ","                    // fel","                    else if (Quiz.xhr.readyState === 4 && Quiz.xhr.status === 400){","                    response.innerHTML = \"FEL! Försök igen \" ","                    }","              };","              Quiz.xhr.open('POST', url, true);","              Quiz.xhr.setRequestHeader('Content-Type', 'application/json');","              Quiz.xhr.send(JSON.stringify(quizanswer));","        },","        ","        click: function(){  ","            document.getElementById(\"button\").onclick = function(e){ // hämtar ut knappen och kopplar en eventhanterare","              Quiz.counter++;","              ","            Quiz.answer(Quiz.quizObj.nextURL);","        };","        },","        ","        output: function(){","            Quiz.nrOfTriesArray.push(Quiz.counter); // måste pusha den sista frågan","             Quiz.countTries.innerHTML = \"Antal försök: \";","           for (var i =1 ; i < Quiz.nrOfTriesArray.length; i++) { // sätter i som 1 då jag vill att den ska börja på 1 och inte på nollan","    Quiz.countTries.innerHTML += \"<br>Fråga \"+i+\": \" + Quiz.nrOfTriesArray[i-1]; // får ta minus 1 så att hela arrayen tas med från början från det första indexet eftersom jag satte att den skulle börja på plats ett","}","   console.log(Quiz.nrOfTriesArray);","","        },","};","//När sidan har laddads in så anropas init.","window.onload = Quiz.init;","","","","","","",""]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":0},"end":{"row":96,"column":10},"action":"remove","lines":["        Quiz.question('http://vhost3.lnu.se:20080/question/1');\t","        \t","        \t\tif(!e){ e = window.event; }","","\t\t\tif(e.keyCode == 13 && !e.shiftKey){","\t\t\t\te.preventDefault();","\t\t\t\tQuiz.messageText();\t\t\t","\t\t}","    },","        ","        ","        question: function(url) { ","            var pTag = document.getElementById(\"question\");","               Quiz.countTries = document.getElementById(\"countTries\");","            // Koppla en händelsehanterare på vad som ska hända när vi får ett svar","            // onreadeystaychange = en händelsehanterare. Vi kopplar den till en funktion. Det som står i det blocket är det som","            // ska köras när vi får ett svar.","            Quiz.xhr.onreadystatechange = function(){","                if(Quiz.xhr.readyState === 4 && Quiz.xhr.status === 200){","                   Quiz.quizObj = JSON.parse(Quiz.xhr.responseText);","                    console.log(Quiz.quizObj.question);","                    pTag.innerHTML = Quiz.quizObj.question; // skriver ut frågan","               ","                    Quiz.click();","                }","            };","            // nästa gång den körs vill jag att den ska köra url","            Quiz.xhr.open('GET', url, true); // måste köra en open för att konfiguera. Alltså Open(\"GET\", \"vad vill vi anropa?\")","            Quiz.xhr.send(null);","        },","        ","        ","        answer: function(url){","                console.log(url);","              var messageText = document.getElementById(\"messageText\");","              var response = document.getElementById(\"response\");","             ","              var quizanswer = {","                  \"id\": 1,","                  \"answer\": messageText.value,","              };","                messageText.value = \"\";","              Quiz.xhr = new XMLHttpRequest();","              Quiz.xhr.onreadystatechange = function(){","                  ","                  // rätt","                    if(Quiz.xhr.readyState === 4 && Quiz.xhr.status === 200){","                        Quiz.quizObj = JSON.parse(Quiz.xhr.responseText);","                        Quiz.question(Quiz.quizObj.nextURL); ","                        Quiz.nrOfTriesArray.push(Quiz.counter);","                        Quiz.counter = 0;","                        response.innerHTML = \"RÄTT! \"","                        ","                    // slut på frågor","                    if (Quiz.quizObj.nextURL === undefined)","                    {  ","                        Quiz.output();","                    }","                    }","                    ","                    // fel","                    else if (Quiz.xhr.readyState === 4 && Quiz.xhr.status === 400){","                    response.innerHTML = \"FEL! Försök igen \" ","                    }","              };","              Quiz.xhr.open('POST', url, true);","              Quiz.xhr.setRequestHeader('Content-Type', 'application/json');","              Quiz.xhr.send(JSON.stringify(quizanswer));","        },","        ","        click: function(){  ","            document.getElementById(\"button\").onclick = function(e){ // hämtar ut knappen och kopplar en eventhanterare","              Quiz.counter++;","              ","            Quiz.answer(Quiz.quizObj.nextURL);","        };","        },","        ","        output: function(){","            Quiz.nrOfTriesArray.push(Quiz.counter); // måste pusha den sista frågan","             Quiz.countTries.innerHTML = \"Antal försök: \";","           for (var i =1 ; i < Quiz.nrOfTriesArray.length; i++) { // sätter i som 1 då jag vill att den ska börja på 1 och inte på nollan","    Quiz.countTries.innerHTML += \"<br>Fråga \"+i+\": \" + Quiz.nrOfTriesArray[i-1]; // får ta minus 1 så att hela arrayen tas med från början från det första indexet eftersom jag satte att den skulle börja på plats ett","}","   console.log(Quiz.nrOfTriesArray);","","        },"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":18},"end":{"row":8,"column":19},"action":"remove","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":18},"end":{"row":8,"column":19},"action":"insert","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":19},"end":{"row":8,"column":20},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":1},"end":{"row":11,"column":2},"action":"remove","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":1},"end":{"row":11,"column":2},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":3,"column":0},"end":{"row":7,"column":30},"action":"remove","lines":["    nrOfTriesArray: [],","    quizObj: undefined,","    xhr: new XMLHttpRequest(), // skapar requestObjekt","    countTries: undefined,","    counter: 0, // antal klick"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":23},"end":{"row":4,"column":24},"action":"insert","lines":["}"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":22},"end":{"row":4,"column":23},"action":"remove","lines":[" "]},{"start":{"row":4,"column":22},"end":{"row":5,"column":0},"action":"insert","lines":["",""]},{"start":{"row":5,"column":0},"end":{"row":5,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":5,"column":8},"end":{"row":7,"column":4},"action":"insert","lines":["","        ","    "]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":7},"end":{"row":2,"column":8},"action":"remove","lines":["z"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":6},"end":{"row":2,"column":7},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":5},"end":{"row":2,"column":6},"action":"remove","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":4},"end":{"row":2,"column":5},"action":"remove","lines":["Q"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":4},"end":{"row":2,"column":5},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":5},"end":{"row":2,"column":6},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":6},"end":{"row":2,"column":7},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":7},"end":{"row":2,"column":8},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":8},"end":{"row":2,"column":9},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":9},"end":{"row":2,"column":10},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":9},"end":{"row":2,"column":10},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":8},"end":{"row":2,"column":9},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":7},"end":{"row":2,"column":8},"action":"remove","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":6},"end":{"row":2,"column":7},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":5},"end":{"row":2,"column":6},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":4},"end":{"row":2,"column":5},"action":"remove","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":4},"end":{"row":2,"column":5},"action":"insert","lines":["P"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":5},"end":{"row":2,"column":6},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":6},"end":{"row":2,"column":7},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":7},"end":{"row":2,"column":8},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":8},"end":{"row":2,"column":9},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":9},"end":{"row":2,"column":10},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":10},"end":{"row":2,"column":11},"action":"insert","lines":["m"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":2,"column":11},"end":{"row":2,"column":11},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1418638554075}